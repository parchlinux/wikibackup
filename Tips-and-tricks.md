---
title: نکات و ترفندها
description: 
published: true
date: 2025-11-13T23:39:07.544Z
tags: 
editor: markdown
dateCreated: 2024-05-05T08:06:21.916Z
---

# نکات و ترفندها

این صفحه مجموعه‌ای از نکات کاربردی و ترفندهای پیشرفته برای استفاده بهینه از پارچ لینوکس است. پارچ لینوکس بر پایه آرچ لینوکس ساخته شده و این نکات برای بهبود تجربه کاری شما طراحی شده‌اند.

## امضای GPG معتبر نیست

هنگام نصب برنامه‌های جدید یا به‌روزرسانی سیستم، ممکن است با خطایی مواجه شوید که نشان می‌دهد امضای دیجیتال بسته‌ها معتبر نیست. این مشکل معمولاً زمانی رخ می‌دهد که کلیدهای رمزنگاری سیستم منقضی شده یا به‌روز نیستند.

### به‌روزرسانی بسته کلیدها

برای حل این مشکل، ابتدا باید بسته‌های کلیدها را به‌روز کنید:

```bash
sudo pacman -Sy
sudo pacman -S archlinux-keyring
```

گاهی اوقات لازم است پایگاه داده کلیدها را به طور کامل بازسازی کنید:

```bash
sudo rm -rf /etc/pacman.d/gnupg
sudo pacman-key --init
sudo pacman-key --populate archlinux parch
sudo pacman -Sy archlinux-keyring
```

این دستورات پوشه کلیدها را پاک کرده، سیستم کلیدگذاری را از نو راه‌اندازی می‌کنند و سپس کلیدهای لازم را بارگیری می‌کنند.

## اندازه فضای روت سیستم زنده کم است

هنگام استفاده از پارچ لینوکس در حالت زنده، سیستم از حافظه موقت برای ذخیره تغییرات استفاده می‌کند. به طور پیش‌فرض، این فضا محدود است و ممکن است برای برخی کارها کافی نباشد.

برای افزایش فضای موقت روت:

```bash
sudo mount -o remount,size=1G /run/archiso/cowspace
```

می‌توانید مقدار را بر اساس نیاز خود تغییر دهید. برای مثال، برای چهار گیگابایت:

```bash
sudo mount -o remount,size=4G /run/archiso/cowspace
```

## ساخت نقطه بازیابی با اسنپ‌شات بِترِفس

اگر از سیستم فایل بِترِفس استفاده می‌کنید، یکی از قدرتمندترین قابلیت‌های آن توانایی گرفتن عکس‌های لحظه‌ای از سیستم است. این عکس‌ها تقریباً بدون اشغال فضای اضافی گرفته می‌شوند و می‌توانید در چند ثانیه به حالت قبلی برگردید.

برای نصب ابزار مدیریت خودکار عکس‌های لحظه‌ای:

```bash
sudo pacman -S snapper snap-pac
```

ابزار اِسنَپِر را برای پارتیشن روت پیکربندی کنید:

```bash
sudo snapper -c root create-config /
```

حالا هر بار که بسته‌ای نصب یا به‌روزرسانی می‌کنید، به صورت خودکار یک عکس لحظه‌ای قبل و بعد از تغییرات گرفته می‌شود. اگر به‌روزرسانی‌ای مشکلی ایجاد کرد، می‌توانید در چند ثانیه به وضعیت قبل برگردید.

برای مشاهده فهرست عکس‌های لحظه‌ای:

```bash
sudo snapper -c root list
```

برای بازگشت به یک عکس لحظه‌ای خاص، کافی است سیستم را راه‌اندازی مجدد کنید و از منوی گراب گزینه عکس‌های لحظه‌ای را انتخاب کنید. تمام عکس‌های موجود نمایش داده می‌شوند و می‌توانید هر کدام را انتخاب کنید.

برای پیکربندی تعداد عکس‌های نگهداری شده:

```bash
sudo nano /etc/snapper/configs/root
```

در این فایل می‌توانید تعیین کنید چند عکس لحظه‌ای ساعتی، روزانه، هفتگی و ماهانه نگهداری شود. این کار از پر شدن دیسک جلوگیری می‌کند.

## مانیتورینگ پیشرفته سیستم با ابزارهای ترمینال

برای نظارت حرفه‌ای بر وضعیت سیستم، می‌توانید از ابزارهای پیشرفته ترمینالی استفاده کنید که اطلاعات جامعی در اختیار شما قرار می‌دهند.

برای مانیتورینگ جامع منابع سیستم، ابزار بی‌تاپ را نصب کنید:

```bash
sudo pacman -S btop
```

این ابزار یک رابط زیبا و رنگی برای نمایش وضعیت پردازنده، حافظه، دیسک، شبکه و فرآیندها دارد. فقط کافی است دستور بی‌تاپ را در ترمینال اجرا کنید و تمام اطلاعات را در یک نمای یکپارچه ببینید.

برای بررسی دقیق عملکرد دیسک و یافتن فرآیندهایی که بیشترین خواندن و نوشتن را انجام می‌دهند:

```bash
sudo pacman -S iotop
sudo iotop
```

این ابزار به خصوص زمانی مفید است که دیسک شما مشغول است ولی نمی‌دانید کدام برنامه باعث این کُندی شده.

برای نظارت بر ترافیک شبکه به تفکیک برنامه:

```bash
sudo pacman -S nethogs
sudo nethogs
```

این ابزار دقیقاً نشان می‌دهد کدام برنامه چقدر پهنای باند مصرف می‌کند. بسیار مفید است وقتی اینترنت کُند شده و می‌خواهید بفهمید چه چیزی دارد پهنای باند را مصرف می‌کند.

## پاکسازی ژورنال‌های سیستم برای آزادسازی فضا

سیستم لاگ تمام رویدادهای سیستم را ثبت می‌کند که با گذشت زمان می‌توانند حجم زیادی داشته باشند. بررسی و پاکسازی این لاگ‌ها هم فضا آزاد می‌کند و هم عملکرد سیستم را بهبود می‌بخشد.

برای مشاهده حجم کل ژورنال‌ها:

```bash
journalctl --disk-usage
```

ممکن است متوجه شوید چندین گیگابایت فضا توسط لاگ‌ها اشغال شده است. برای محدود کردن حجم ژورنال‌ها به یک گیگابایت:

```bash
sudo journalctl --vacuum-size=1G
```

یا می‌توانید ژورنال‌های قدیمی‌تر از یک ماه را پاک کنید:

```bash
sudo journalctl --vacuum-time=1month
```

برای محدود کردن دائمی حجم ژورنال‌ها، فایل پیکربندی را ویرایش کنید:

```bash
sudo nano /etc/systemd/journald.conf
```

این خطوط را از حالت توضیح خارج کرده و مقادیر را تنظیم کنید:

```
SystemMaxUse=500M
SystemMaxFileSize=50M
```

این تنظیمات حداکثر فضای اشغالی ژورنال‌ها را محدود می‌کند و از پر شدن دیسک جلوگیری می‌کند.

## استفاده از حافظه مشترک برای بهبود عملکرد

اگر از مرورگرها یا برنامه‌هایی استفاده می‌کنید که فایل‌های موقت زیادی ایجاد می‌کنند، انتقال این فایل‌ها به حافظه مشترک در رم می‌تواند سرعت را به طور محسوسی افزایش دهد.

پوشه‌های موقت مرورگر را به حافظه مشترک منتقل کنید. برای فایرفاکس، یک نمایه جدید با پوشه حافظه مشترک ایجاد کنید:

```bash
mkdir -p /dev/shm/firefox-cache
```

در تنظیمات پیشرفته فایرفاکس آدرس زیر را باز کنید:

```
about:config
```

یک تنظیم جدید از نوع رشته با نام زیر ایجاد کنید:

```
browser.cache.disk.parent_directory
```

و مقدار آن را روی مسیر زیر قرار دهید:

```
/dev/shm/firefox-cache
```

حالا تمام فایل‌های موقت مرورگر در رم ذخیره می‌شوند که بسیار سریع‌تر از دیسک است. همین کار را برای سایر برنامه‌ها هم می‌توانید انجام دهید.

برای پوشه موقت سیستم هم می‌توانید این کار را انجام دهید:

```bash
sudo nano /etc/fstab
```

این خط را اضافه کنید:

```
tmpfs   /tmp    tmpfs   defaults,noatime,mode=1777,size=2G   0  0
```

پس از راه‌اندازی مجدد، پوشه موقت سیستم در رم قرار می‌گیرد و عملکرد بسیاری از برنامه‌ها بهبود می‌یابد.

## تنظیم برنامه‌های پیش‌فرض با دقت بالا

گاهی اوقات برنامه‌های نامناسبی به عنوان پیش‌فرض برای باز کردن فایل‌ها انتخاب می‌شوند. با تنظیم دقیق برنامه‌های پیش‌فرض، تجربه کاری شما بهبود می‌یابد.

برای مشاهده برنامه پیش‌فرض یک نوع فایل:

```bash
xdg-mime query default image/png
```

برای تغییر برنامه پیش‌فرض:

```bash
xdg-mime default okular.desktop application/pdf
```

اگر می‌خواهید تمام تصاویر با یک برنامه خاص باز شوند:

```bash
xdg-mime default gwenview.desktop image/png
xdg-mime default gwenview.desktop image/jpeg
xdg-mime default gwenview.desktop image/gif
```

می‌توانید فایل پیکربندی را مستقیماً ویرایش کنید:

```bash
nano ~/.config/mimeapps.list
```

در این فایل می‌توانید به صورت دسته‌جمعی برنامه‌های پیش‌فرض را تنظیم کنید.

## بهینه‌سازی پایگاه داده یافتن فایل‌ها

پایگاه داده موکِیت به شما امکان می‌دهد فایل‌ها را در کسری از ثانیه پیدا کنید، بدون اینکه نیاز باشد تمام دیسک جستجو شود.

برای ساخت یا به‌روزرسانی پایگاه داده:

```bash
sudo updatedb
```

این دستور ممکن است در اولین اجرا چند دقیقه طول بکشد، ولی بعداً بسیار سریع است.

برای جستجوی یک فایل:

```bash
locate نام-فایل
```

برای اینکه برخی پوشه‌ها در پایگاه داده قرار نگیرند، فایل پیکربندی را ویرایش کنید:

```bash
sudo nano /etc/updatedb.conf
```

پوشه‌هایی که نمی‌خواهید فهرست‌برداری شوند را به متغیر زیر اضافه کنید:

```
PRUNEPATHS = "/tmp /var/spool /media /mnt"
```

برای به‌روزرسانی خودکار روزانه پایگاه داده، سرویس مربوطه را فعال کنید:

```bash
sudo systemctl enable updatedb.timer
```

## رفع مشکلات صدا با تنظیمات پیشرفته

گاهی اوقات با مشکلات صدا مانند صدای خش‌دار، تاخیر، یا عدم شناسایی دستگاه‌ها مواجه می‌شوید. این تنظیمات می‌تواند بسیاری از مشکلات را حل کند.

برای مشاهده وضعیت کارت‌های صدا:

```bash
aplay -l
```

اگر صدای خش‌دار دارید، احتمالاً مشکل از مدیریت برق کارت صدا است. برای غیرفعال کردن مدیریت برق کارت صدا:

```bash
sudo nano /etc/modprobe.d/audio_powersave.conf
```

این خط را اضافه کنید:

```
options snd_hda_intel power_save=0
```

برای اعمال تغییرات بدون راه‌اندازی مجدد:

```bash
sudo modprobe -r snd_hda_intel
sudo modprobe snd_hda_intel
```

اگر با تاخیر صدا مواجه هستید، تنظیمات پایپ‌وایر را بهینه کنید:

```bash
mkdir -p ~/.config/pipewire
cp /usr/share/pipewire/pipewire.conf ~/.config/pipewire/
nano ~/.config/pipewire/pipewire.conf
```

در بخش تنظیمات، مقادیر زیر را تغییر دهید:

```
default.clock.rate = 48000
default.clock.quantum = 1024
default.clock.min-quantum = 512
```

مقادیر کوانتوم کمتر تاخیر کمتر ولی استفاده بیشتر از پردازنده را به همراه دارند. مقادیر بالاتر برای استفاده عمومی مناسب‌ترند.

## مدیریت خدمات کاربری با سیستم‌دی

سیستم‌دی نه تنها خدمات سیستمی، بلکه خدمات کاربری را هم مدیریت می‌کند. می‌توانید برنامه‌هایی که می‌خواهید با ورود شما اجرا شوند را به عنوان خدمت کاربری تعریف کنید.

برای مشاهده خدمات کاربری فعال:

```bash
systemctl --user list-units --type=service
```

برای ساخت یک خدمت کاربری سفارشی، یک فایل در این مسیر ایجاد کنید:

```bash
mkdir -p ~/.config/systemd/user
nano ~/.config/systemd/user/my-script.service
```

محتوای فایل:

```
[Unit]
Description=اسکریپت شخصی من

[Service]
ExecStart=/home/username/my-script.sh
Restart=on-failure

[Install]
WantedBy=default.target
```

برای فعال‌سازی و اجرای خدمت:

```bash
systemctl --user enable my-script.service
systemctl --user start my-script.service
```

این روش بسیار قدرتمندتر از استفاده از پوشه راه‌اندازی خودکار است چون کنترل کامل بر زمان اجرا، راه‌اندازی مجدد خودکار در صورت خطا، و وابستگی‌ها دارید.

## پیکربندی رزولوشن صفحه نمایش با دقت بالا

> توجه!
> نکته زیر تنها در X11 کاربردی است و در وی‌لند کاربردی ندارد.
{.is-warning}


اگر از چند مانیتور با رزولوشن‌های مختلف استفاده می‌کنید، یا می‌خواهید تنظیمات دقیق‌تری داشته باشید، می‌توانید پیکربندی دستی انجام دهید.

برای مشاهده اطلاعات خروجی‌های نمایش:

```bash
xrandr
```

این دستور فهرست تمام خروجی‌ها و رزولوشن‌های پشتیبانی شده را نشان می‌دهد.

برای تنظیم رزولوشن سفارشی:

```bash
xrandr --output HDMI-1 --mode 1920x1080 --rate 144
```

برای چیدمان دو مانیتور کنار هم:

```bash
xrandr --output HDMI-1 --auto --output DP-1 --auto --right-of HDMI-1
```

اگر رزولوشن مورد نظرتان در لیست نیست، می‌توانید یک حالت سفارشی ایجاد کنید. ابتدا پارامترهای مورد نیاز را محاسبه کنید:

```bash
cvt 1920 1080 60
```

خروجی این دستور یک خط است که باید به سیستم اضافه کنید:

```bash
xrandr --newmode "1920x1080_60.00" 173.00 1920 2048 2248 2576 1080 1083 1088 1120 -hsync +vsync
xrandr --addmode HDMI-1 "1920x1080_60.00"
xrandr --output HDMI-1 --mode "1920x1080_60.00"
```

برای دائمی کردن این تنظیمات، آنها را در فایل راه‌اندازی محیط گرافیکی اضافه کنید.

## بهبود عملکرد بازی با تنظیمات گیم‌مود

اگر از سیستم برای بازی استفاده می‌کنید، می‌توانید با فعال کردن حالت بازی عملکرد را بهبود بخشید.

```bash
sudo pacman -S gamemode lib32-gamemode
```

برای اجرای یک بازی با گیم‌مود:

```bash
gamemoderun ./game
```

برای استفاده خودکار در استیم، در تنظیمات راه‌اندازی بازی این دستور را اضافه کنید:

```
gamemoderun %command%
```

گیم‌مود به صورت خودکار اولویت پردازنده و کارت گرافیک را برای بازی افزایش می‌دهد، فرکانس پردازنده را بالا می‌برد، و خدمات غیرضروری را موقتاً متوقف می‌کند.

برای پیکربندی دقیق‌تر:

```bash
nano ~/.config/gamemode.ini
```

در این فایل می‌توانید تنظیماتی مانند حداکثر فرکانس پردازنده، اسکریپت‌های اجرا شونده هنگام شروع و پایان بازی، و سایر بهینه‌سازی‌ها را تعیین کنید.

## پاکسازی حافظه نهان فونت‌ها

گاهی اوقات حافظه نهان قلم‌ها خراب می‌شود و باعث نمایش نادرست متون می‌شود. پاکسازی این حافظه نهان می‌تواند مشکل را حل کند.

```bash
fc-cache -fv
```

اگر همچنان مشکل دارید، حافظه نهان کاربری را هم پاک کنید:

```bash
rm -rf ~/.cache/fontconfig
fc-cache -r
```

برای مشاهده فهرست قلم‌های نصب شده:

```bash
fc-list
```

اگر قلمی را نصب کردید ولی در برنامه‌ها نمایش داده نمی‌شود، احتمالاً نیاز به بازسازی حافظه نهان دارید.

## استفاده از فضای ذخیره‌سازی شبکه

اگر چند کامپیوتر در شبکه خانگی دارید، می‌توانید پوشه‌ها را به اشتراک بگذارید و به راحتی به فایل‌های دیگر دستگاه‌ها دسترسی داشته باشید.

برای نصب سامبا:

```bash
sudo pacman -S samba
```

یک پوشه برای اشتراک‌گذاری ایجاد کنید:

```bash
mkdir ~/shared
```

فایل پیکربندی سامبا را ویرایش کنید:

```bash
sudo nano /etc/samba/smb.conf
```

در انتهای فایل این بخش را اضافه کنید:

```
[shared]
path = /home/username/shared
read only = no
browsable = yes
guest ok = no
```

یک رمز عبور برای سامبا تنظیم کنید:

```bash
sudo smbpasswd -a username
```

سرویس را راه‌اندازی کنید:

```bash
sudo systemctl enable smb
sudo systemctl start smb
```

حالا می‌توانید از دستگاه‌های دیگر در شبکه به این پوشه دسترسی داشته باشید.

## تنظیم اولویت شبکه برای برنامه‌های خاص

اگر می‌خواهید برخی برنامه‌ها اولویت بالاتری در استفاده از پهنای باند داشته باشند، می‌توانید با ابزار وندرشیپینگ این کار را انجام دهید.

```bash
sudo pacman -S wondershaper
```

برای محدود کردن سرعت یک رابط شبکه:

```bash
sudo wondershaper -a eth0 -d 5000 -u 1000
```

این دستور سرعت دانلود را به پنج مگابیت بر ثانیه و آپلود را به یک مگابیت محدود می‌کند.

برای حذف محدودیت:

```bash
sudo wondershaper -c -a eth0
```

این ابزار برای کنترل ترافیک شبکه و جلوگیری از اشغال کامل پهنای باند توسط یک برنامه مفید است.